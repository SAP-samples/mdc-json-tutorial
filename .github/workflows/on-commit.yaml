on:
    push:
      branches:
        - typescript
jobs:
    on-commit:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v4
        - uses: actions/setup-node@v3
        - run: |
            git config user.name github-actions
            git config user.email github-actions@github.com
            zip -r mdc.tutorial.zip ex0/ -x 'ex0/readme.md' -x '*.png'
            git add mdc.tutorial.zip
            git commit -m "update mdc.tutorial.zip"
            for dir in ex*/; do
                (cd "$dir" && npm i && npm run build --clean-dest && git add dist);
            done
            git commit -m "update ghpages"
            git push -f origin typescript:ghpages